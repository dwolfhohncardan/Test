<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Material-Check Pro - Josef Hohn GmbH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
        body { 
            -webkit-tap-highlight-color: transparent; 
            touch-action: pan-y;
            background-color: #262626;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .hohn-orange { color: #ff9800; }
        .hohn-bg-orange { background-color: #ff9800; }

        /* Swiper Container Styling */
        .swiper {
            width: 100%;
            padding-top: 20px;
            padding-bottom: 50px;
        }

        /* Schalttafel Styling */
        .machine-slide {
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s;
        }

        .machine-card {
            width: 90%;
            max-width: 400px;
            height: 250px;
            background-color: #333333;
            border-radius: 20px;
            border: 4px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        /* Aktiver Zustand im Swiper */
        .machine-card.active {
            border-color: #ff9800;
            background-color: #404040;
            box-shadow: 0 0 20px rgba(255, 152, 0, 0.4);
        }

        .status-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #666;
            margin-bottom: 10px;
        }

        .machine-card.active .status-dot {
            background-color: #ff9800;
            box-shadow: 0 0 10px #ff9800;
        }

        /* Navigation Dots */
        .swiper-pagination-bullet { background: #666 !important; opacity: 1; }
        .swiper-pagination-bullet-active { background: #ff9800 !important; }
    </style>
</head>
<body class="p-3 font-sans select-none text-white">

    <header class="mb-2 pt-4 text-center">
        <h1 class="text-3xl font-bold tracking-tight mb-1">Josef Hohn GmbH</h1>
        <p class="text-xs font-bold uppercase tracking-[0.2em] hohn-orange">Material-Anforderung</p>
    </header>

    <div class="swiper mySwiper flex-grow flex items-center">
        <div class="swiper-wrapper" id="swiperWrapper">
            </div>
        <div class="swiper-pagination"></div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 p-5 bg-[#262626]/95 backdrop-blur-md border-t border-white/5 shadow-2xl">
        <form action="https://formspree.io/f/xpqryvel" method="POST" id="materialForm">
            <input type="hidden" name="Bedarf_an_Maschinen" id="selectedMachinesInput">
            <button type="submit" id="submitBtn" disabled class="w-full bg-[#3d3d3d] text-gray-500 font-bold py-5 rounded-xl transition-all text-xl uppercase tracking-widest disabled:opacity-50 shadow-inner">
                ANFORDERN (0)
            </button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
        const machines = [
            "Grob 2", "Integrex", "Nexus", "Smart", 
            "Roboterlinie Drehen", "Roboterlinie Bohren", 
            "Ergo 260CL", "Axisco", "Karl Klink", 
            "Padovani 3", "Magdeburg", "DMC 60 (H)", 
            "Zentriermaschine", "Pronto 1", "Pronto 3", 
            "Pronto 4", "Pronto 5"
        ];

        let selectedMachines = new Set();
        const wrapper = document.getElementById('swiperWrapper');

        // Slides erstellen
        machines.forEach(name => {
            const slide = document.createElement('div');
            slide.className = "swiper-slide machine-slide";
            slide.innerHTML = `
                <div class="machine-card" onclick="toggleMachine('${name}', this)">
                    <div class="status-dot"></div>
                    <span class="status-label text-xs uppercase font-bold text-gray-400 mb-4 tracking-widest">Bereit</span>
                    <span class="text-3xl font-black text-white leading-tight uppercase px-4">${name}</span>
                </div>
            `;
            wrapper.appendChild(slide);
        });

        // Swiper Initialisierung
        const swiper = new Swiper(".mySwiper", {
            effect: "coverflow",
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: "auto",
            coverflowEffect: {
                rotate: 20,
                stretch: 0,
                depth: 150,
                modifier: 1,
                slideShadows: false,
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
        });

        function toggleMachine(name, card) {
            const statusLabel = card.querySelector('.status-label');

            if (selectedMachines.has(name)) {
                selectedMachines.delete(name);
                card.classList.remove('active');
                statusLabel.innerText = "Bereit";
                statusLabel.classList.remove('hohn-orange');
                statusLabel.classList.add('text-gray-400');
            } else {
                selectedMachines.add(name);
                card.classList.add('active');
                statusLabel.innerText = "Bedarf gemeldet";
                statusLabel.classList.remove('text-gray-400');
                statusLabel.classList.add('hohn-orange');
            }

            updateUI();
        }

        function updateUI() {
            const btn = document.getElementById('submitBtn');
            const input = document.getElementById('selectedMachinesInput');
            
            input.value = Array.from(selectedMachines).join(', ');
            btn.innerText = `ANFORDERN (${selectedMachines.size})`;
            
            if (selectedMachines.size > 0) {
                btn.disabled = false;
                btn.classList.remove('bg-[#3d3d3d]', 'text-gray-500');
                btn.classList.add('hohn-bg-orange', 'text-white');
            } else {
                btn.disabled = true;
                btn.classList.remove('hohn-bg-orange', 'text-white');
                btn.classList.add('bg-[#3d3d3d]', 'text-gray-500');
            }
        }
    </script>
</body>
</html>
